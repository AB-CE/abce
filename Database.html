<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Observing agents &mdash; ABCE 0.3.1alpha documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.1alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ABCE 0.3.1alpha documentation" href="index.html" />
    <link rel="next" title="FirmMultiTechnologies" href="FirmMultiTechnologies.html" />
    <link rel="prev" title="Messaging" href="Messaging.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="FirmMultiTechnologies.html" title="FirmMultiTechnologies"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Messaging.html" title="Messaging"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ABCE 0.3.1alpha documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="observing-agents">
<h1>Observing agents<a class="headerlink" href="#observing-agents" title="Permalink to this headline">¶</a></h1>
<p>There are three different ways of observing your agents:</p>
<dl class="docutils">
<dt>Trade Logging</dt>
<dd>ABCE by default logs all trade and creates a SAM or IO matrix.</dd>
<dt>Manual in agent logging</dt>
<dd>An agent is instructed to log a variable with <a class="reference internal" href="#database.Database.log" title="database.Database.log"><code class="xref py py-meth docutils literal"><span class="pre">log()</span></code></a> or a
change in a variable with <a class="reference internal" href="#database.Database.log_change" title="database.Database.log_change"><code class="xref py py-meth docutils literal"><span class="pre">log_change()</span></code></a>.</dd>
<dt>Panel Data</dt>
<dd><code class="xref py py-meth docutils literal"><span class="pre">panel_data()</span></code> creates panel data for all agents in a specific
agent group at a specific point in every round. It is set in start.py</dd>
</dl>
<p>How to retrieve the Simulation results is explained in <a class="reference internal" href="simulation_results.html"><em>Retrieval of the simulation results</em></a></p>
<div class="section" id="trade-logging">
<h2>Trade Logging<a class="headerlink" href="#trade-logging" title="Permalink to this headline">¶</a></h2>
<p>By default ABCE logs all trade and creates a social accounting matrix or
input output matrix. Because the creation of the trade log is very time consuming
you can change the default behavior in world_parameter.csv. In the column
&#8216;trade_logging&#8217; you can choose &#8216;individual&#8217;, &#8216;group&#8217; or &#8216;off&#8217;. (Without the
apostrophes!).</p>
</div>
<div class="section" id="manual-logging">
<h2>Manual logging<a class="headerlink" href="#manual-logging" title="Permalink to this headline">¶</a></h2>
<p>All functions except the trade related functions can be logged. The following
code logs the production function and the change of the production from last
year:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">produce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;production&#39;</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">log_change</span><span class="p">(</span><span class="s">&#39;production&#39;</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>Log logs dictionaries. To log your own variable:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;price&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;input&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s">&#39;output&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
<p>Further you can write the change of a varibale between a start and an end point with:
<a class="reference internal" href="#database.Database.observe_begin" title="database.Database.observe_begin"><code class="xref py py-meth docutils literal"><span class="pre">observe_begin()</span></code></a> and <a class="reference internal" href="#database.Database.observe_end" title="database.Database.observe_end"><code class="xref py py-meth docutils literal"><span class="pre">observe_end()</span></code></a>.</p>
<dl class="class">
<dt id="database.Database">
<em class="property">class </em><code class="descclassname">database.</code><code class="descname">Database</code><a class="reference internal" href="_modules/database.html#Database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database" title="Permalink to this definition">¶</a></dt>
<dd><p>The database class</p>
<dl class="method">
<dt id="database.Database.log">
<code class="descname">log</code><span class="sig-paren">(</span><em>action_name</em>, <em>data_to_log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.log" title="Permalink to this definition">¶</a></dt>
<dd><p>With log you can write the models data. Log can save variable states
and and the working of individual functions such as production,
consumption, give, but not trade(as its handled automatically).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;name&#8217;(string):</dt>
<dd>the name of the current action/method the agent executes</dd>
<dt>data_to_log:</dt>
<dd>a dictianary with data for the database</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;profit&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;&#39;</span><span class="p">:</span> <span class="n">profit</span><span class="p">})</span>

<span class="o">...</span> <span class="n">different</span> <span class="n">method</span> <span class="o">...</span>

<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;employment_and_rent&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;employment&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;LAB&#39;</span><span class="p">),</span>
                                 <span class="s">&#39;rent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;CAP&#39;</span><span class="p">),</span> <span class="s">&#39;composite&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite</span><span class="p">})</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_households</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;give</span><span class="si">%i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">give</span><span class="p">(</span><span class="s">&#39;Household&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39;money&#39;</span><span class="p">,</span> <span class="n">payout</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_households</span><span class="p">))</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See also:</dt>
<dd><dl class="first docutils">
<dt><code class="xref py py-meth docutils literal"><span class="pre">log_nested()</span></code>:</dt>
<dd>handles nested dictianaries</dd>
<dt><code class="xref py py-meth docutils literal"><span class="pre">log_change()</span></code>:</dt>
<dd>loges the change from last round</dd>
</dl>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">observe_begin()</span></code>:</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="database.Database.log_change">
<code class="descname">log_change</code><span class="sig-paren">(</span><em>action_name</em>, <em>data_to_log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.log_change"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.log_change" title="Permalink to this definition">¶</a></dt>
<dd><p>This command logs the change in the variable from the round before.
Important, use only once with the same action_name.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;name&#8217;(string):</dt>
<dd>the name of the current action/method the agent executes</dd>
<dt>data_to_log:</dt>
<dd>a dictianary with data for the database</dd>
</dl>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre>self.log_change(&#39;profit&#39;, {&#39;money&#39;: self.possession(&#39;money&#39;)]})
self.log_change(&#39;inputs&#39;, {&#39;money&#39;: self.possessions([&#39;money&#39;, &#39;gold&#39;, &#39;CAP&#39;, &#39;LAB&#39;)]})
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="database.Database.log_dict">
<code class="descname">log_dict</code><span class="sig-paren">(</span><em>action_name</em>, <em>data_to_log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.log_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.log_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>same as the log function, only that it supports nested dictionaries
see: <code class="xref py py-meth docutils literal"><span class="pre">log()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="database.Database.log_value">
<code class="descname">log_value</code><span class="sig-paren">(</span><em>name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.log_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.log_value" title="Permalink to this definition">¶</a></dt>
<dd><p>logs a value, with a name</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;name&#8217;(string):</dt>
<dd>the name of the value/variable</dd>
<dt>value(int/float):</dt>
<dd>the variable = value to log</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="database.Database.observe_begin">
<code class="descname">observe_begin</code><span class="sig-paren">(</span><em>action_name</em>, <em>data_to_observe</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.observe_begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.observe_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>observe_begin and observe_end, observe the change of a variable.
observe_begin(...), takes a list of variables to be observed.
observe_end(...) writes the change in this variables into the log file</p>
<p>you can use nested observe_begin / observe_end combinations</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;name&#8217;(string):</dt>
<dd>the name of the current action/method the agent executes</dd>
<dt>data_to_log:</dt>
<dd>a dictianary with data for the database</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;production&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;composite&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">final_product</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">]})</span>

<span class="o">...</span> <span class="n">different</span> <span class="n">method</span> <span class="o">...</span>

<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;employment_and_rent&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;employment&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;LAB&#39;</span><span class="p">),</span>
                                <span class="s">&#39;rent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;CAP&#39;</span><span class="p">)})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="database.Database.observe_end">
<code class="descname">observe_end</code><span class="sig-paren">(</span><em>action_name</em>, <em>data_to_observe</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database.html#Database.observe_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#database.Database.observe_end" title="Permalink to this definition">¶</a></dt>
<dd><p>This command puts in a database called log, whatever values you
want values need to be delivered as a dictionary:</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;name&#8217;(string):</dt>
<dd>the name of the current action/method the agent executes</dd>
<dt>data_to_log:</dt>
<dd>a dictianary with data for the database</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;production&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;composite&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">composite</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">final_product</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">]})</span>

<span class="o">...</span> <span class="n">different</span> <span class="n">method</span> <span class="o">...</span>

<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&#39;employment_and_rent&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;employment&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;LAB&#39;</span><span class="p">),</span>
                                <span class="s">&#39;rent&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">possession</span><span class="p">(</span><span class="s">&#39;CAP&#39;</span><span class="p">)})</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="panel-data">
<h2>Panel Data<a class="headerlink" href="#panel-data" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Observing agents</a><ul>
<li><a class="reference internal" href="#trade-logging">Trade Logging</a></li>
<li><a class="reference internal" href="#manual-logging">Manual logging</a></li>
<li><a class="reference internal" href="#panel-data">Panel Data</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Messaging.html"
                        title="previous chapter">Messaging</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FirmMultiTechnologies.html"
                        title="next chapter">FirmMultiTechnologies</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Database.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="FirmMultiTechnologies.html" title="FirmMultiTechnologies"
             >next</a> |</li>
        <li class="right" >
          <a href="Messaging.html" title="Messaging"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ABCE 0.3.1alpha documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2012, Davoud Taghawi-Nejad.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>